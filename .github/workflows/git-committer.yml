# 2 jobs - Backfill & Daily Commits
name: Backfill + Daily Commit

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on:
  schedule:
    - cron: "0 10,11 * * *" # CRON expression
  workflow_dispatch: # Allows manual trigger

jobs:
  # This job runs only for scheduled daily commits on a machine
  daily-commit:
    if: github.event_name == 'schedule'
    runs-on: ubuntu-latest # machine
    # sequence of tasks
    steps:
      # checkout the git repo to access it
      - name: Check out the repo
        uses: actions/checkout@v3
      # setup the git user on the machine
      - name: Set up Git user
        run: |
          git config --global user.name "ryanjoy0000"
          git config --global user.email "ryanjoy0000@gmail.com"
      # compose git message
      - name: Git message
        id: commit-message
        run: |
          MESSAGES=(
            "Daily update - small tweaks! âœ¨"
            "Another day, another commit ðŸš€"
            "Daily grind! Keeping things fresh âš™ï¸"
            "Just making sure everything's good! ðŸ‘"
            "Commiting some awesomeness today ðŸŒŸ"
            "Tiny changes make big differences! ðŸ› ï¸"
            "Automated update - let's keep moving!"
            "Simple changes, strong impact ðŸ’ª"
            "Keeping the momentum going! ðŸš€"
            "One commit closer to greatness âœ¨"
            "Code, coffee, and commits â˜•"
            "The force is strong with this one ðŸŒŒ"
            "Another one bites the dust ðŸŽµ"
            "Mission accomplished! âœ…"
            "Commit it like itâ€™s hot ðŸ”¥"
            "Housekeeping mode activated ðŸ›"
            "Fixed something... hopefully ðŸ¤ž"
            "This definitely wonâ€™t break... right? ðŸ¤”"
            "Yup, still works ðŸŽ‰"
            "Donâ€™t worry, I tested it! (kind of...) ðŸ˜…"
            "Future me will understand this... I hope ðŸ§ "
            "Adding some charm to this code âœ¨"
            "Spreading good vibes through code ðŸŒˆ"
            "Todayâ€™s code: powered by positivity ðŸŒŸ"
            "Sending good commits and good energy âœŒï¸"
            "Letâ€™s keep this party going ðŸŽ‰"
            "Chipping away at awesomeness ðŸ› ï¸"
          )
          INDEX=$((RANDOM % ${#MESSAGES[@]}))
          MESSAGE=${MESSAGES[$INDEX]}
          echo "MESSAGE=$MESSAGE" >> $GITHUB_ENV

      - name: Modify file
        run: echo "Daily update on $(date)" >> 1.txt

      - name: Stage changes
        run: git add 1.txt

      - name: Commit changes
        run: git commit -m "$MESSAGE"

      - name: Push changes
        run: git push origin main
